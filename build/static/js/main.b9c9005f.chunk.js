(this.webpackJsonpadmin=this.webpackJsonpadmin||[]).push([[0],{39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),s=a(32),o=a.n(s),r=(a(39),a(10)),i=a(2),l=a(11),d=(a(40),a(12)),u=a(3),b=(a(41),a(0)),j={loggedIn:!1},h=Object(n.createContext)(j),p=h.Provider,g=function(e){var t=e.children,a=Object(n.useReducer)((function(e,t){switch(t.type){case"LOG_IN":return Object(i.a)(Object(i.a)({},e),{},{loggedIn:!0});case"LOG_OUT":return Object(i.a)(Object(i.a)({},e),{},{loggedIn:!1});default:return e}}),j),c=Object(l.a)(a,2),s=c[0],o=c[1];return Object(b.jsx)(p,{value:{state:s,dispatch:o},children:t})},m=a(17),x=function(){var e=Object(u.f)();return Object(b.jsxs)("div",{style:{boxShadow:"0px 0px 10px rgba(0,0,0,0.2)",zIndex:"2"},className:"w-72 h-screen bg-white",children:[Object(b.jsxs)(d.b,{to:"/pay",className:"w-full p-4 cursor-pointer flex flex-row items-center block  border border-gray-200  text-grey-100 font-sm \n             ".concat("/pay"===e.pathname?"bg-gray-200":"text-darkgray","\n            "),children:[Object(b.jsx)(m.b,{style:{marginRight:"20px"}}),Object(b.jsx)("div",{children:"Payments"})]}),Object(b.jsxs)(d.b,{to:"/reports",className:"w-full p-4 cursor-pointer flex flex-row items-center block  border border-gray-200  text-grey-100 font-sm \n             ".concat("/reports"===e.pathname?"bg-gray-200":"text-darkgray","\n            "),children:[Object(b.jsx)(m.a,{style:{marginRight:"20px"}}),Object(b.jsx)("div",{children:"Reports"})]})]})},f=a(5),O=a.n(f),v=a.p+"static/media/close.17a94979.svg",w=a(14),y=a.n(w);function N(){var e=Object(u.g)().name,t=Object(n.useState)(Object(r.a)({bookedSlots:[],search:"",by:"",currentPage:1,pages:[],refresh:0,toSort:!1},"by","")),a=Object(l.a)(t,2),c=a[0],s=a[1];Object(n.useEffect)((function(){O.a.post("/api/slot/get_booked_paginate",{currentPage:c.currentPage,name:e}).then((function(e){var t=[];if(e.data.pageCount<5)for(var a=0;a<e.data.pageCount;a++)t.push(a+1);else for(var n=0;n<5;n++)t.push(n+1);s(Object(i.a)(Object(i.a)({},c),{},{bookedSlots:e.data.bookedSlots,pageCount:e.data.pageCount,pages:t}))})).catch((function(e){return console.log(e)}))}),[c.refresh]);return Object(b.jsxs)("div",{className:" w-full",style:{overflowX:"auto"},children:[Object(b.jsxs)("table",{id:"alter",style:{width:"100%",backgroundColor:"white",overflowX:"auto"},children:[Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{className:"bg-white",style:{width:"auto"},children:"OrderId"}),Object(b.jsx)("th",{className:"bg-white",children:"Name"}),Object(b.jsx)("th",{onClick:function(){return t="date",void O.a.post("/api/slot/get_booked_paginate",{currentPage:1,toSort:!0,by:t,name:e}).then((function(e){var a=[];if(e.data.pageCount<5)for(var n=0;n<e.data.pageCount;n++)a.push(n+1);else for(var o=0;o<5;o++)a.push(o+1);s(Object(i.a)(Object(i.a)({},c),{},{bookedSlots:e.data.bookedSlots,pageCount:e.data.pageCount,pages:a,currentPage:1,by:t,toSort:!0,search:""}))})).catch((function(e){return console.log(e)}));var t},className:"cursor-pointer bg-white",children:"Date"}),Object(b.jsx)("th",{className:"bg-white",children:"Slot"}),Object(b.jsx)("th",{className:"bg-white",children:"Service"}),Object(b.jsx)("th",{className:"bg-white",children:"Status"}),Object(b.jsx)("th",{className:"bg-white",children:"Cancel"})]}),c.bookedSlots.map((function(e){var t,a,n,o;return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:e.receipt}),Object(b.jsx)("td",{children:null===(t=e.userDetailes)||void 0===t?void 0:t.name}),Object(b.jsx)("td",{children:e.date}),Object(b.jsx)("td",{children:Object(b.jsxs)("span",{children:[(null===e||void 0===e||null===(a=e.slotDetailes)||void 0===a?void 0:a.startTime)||"not","-",(null===e||void 0===e||null===(n=e.slotDetailes)||void 0===n?void 0:n.endTime)||"exists"]})}),Object(b.jsx)("td",{children:Object(b.jsx)("span",{children:(null===e||void 0===e||null===(o=e.serviceId)||void 0===o?void 0:o.name)||e.serviceName})}),Object(b.jsx)("td",{onDoubleClick:function(){!function(e){"processing"===e.status?O.a.post("/api/slot/change_status",{status:"completed",id:e._id}).then((function(t){var a=c.bookedSlots;a=a.map((function(t){return t._id==e._id&&("processing"===t.status?t.status="completed":"completed"===t.status&&(t.status="processing")),t})),s(Object(i.a)(Object(i.a)({},c),{},{bookedSlots:a}))})).catch((function(e){console.log(e)})):"completed"===e.status&&O.a.post("/api/slot/change_status",{status:"processing",id:e._id}).then((function(t){var a=c.bookedSlots;a=a.map((function(t){return t._id==e._id&&("processing"===t.status?t.status="completed":"completed"===t.status&&(t.status="processing")),t})),s(Object(i.a)(Object(i.a)({},c),{},{bookedSlots:a}))})).catch((function(e){console.log(e)}))}(e)},children:Object(b.jsx)("span",{style:{padding:"5px",color:"white",fontSize:"13px",backgroundColor:"processing"===e.status||"completed"===e.status?"#10B981":"#EF4444"},children:e.status})}),Object(b.jsx)("td",{onClick:function(){var t,a;t=97.82*e.amount/100||97.82*e.serviceId.charge/100,a=e.tid,console.log(typeof t),y()({title:"Are You Sure?",text:"Refund Amount: ".concat(t),icon:"warning",buttons:!0,dangerMode:!0}).then((function(e){e&&O.a.post("/api/pay/refund",{tid:a,amount:parseInt(t)}).then((function(e){y()("Will be refunded!",{icon:"success"}),s(Object(i.a)(Object(i.a)({},c),{},{refresh:c.refresh+1}))})).catch((function(e){return y()(e.response.data.message,{icon:"danger"})}))}))},children:Object(b.jsx)("img",{src:v,style:{width:"7px",height:"auto",margin:"auto"}})})]})}))]}),Object(b.jsx)("div",{style:{width:"min-content",margin:"auto",alignItems:"center",height:"auto",marginTop:"30px"},className:"flex flex-row items-center",children:Object(b.jsx)("div",{style:{margin:"auto",width:"min-content",height:"auto"},className:"flex flex-row",children:c.pages.map((function(t){return Object(b.jsx)("div",{onClick:function(){s(Object(i.a)(Object(i.a)({},c),{},{currentPage:t})),function(t){O.a.post("/api/slot/get_booked_paginate",{currentPage:t,toSort:c.toSort,by:c.by,name:e}).then((function(e){s(Object(i.a)(Object(i.a)({},c),{},{bookedSlots:e.data.bookedSlots,pageCount:e.data.pageCount,currentPage:t}))})).catch((function(e){return console.log(e)}))}(t)},className:"p-1 pl-3 pr-3 cursor-pointer ml-2 mr-2 ".concat(c.currentPage==t?"bg-gray-200 rounded-sm":""),children:t})}))})})]})}var S=a(34);function k(){var e=Object(n.useContext)(h),t=(e.state,e.dispatch);return Object(b.jsxs)("div",{className:"flex flex-row p-5 justify-between bg-gray-300 mb-8",children:[Object(b.jsx)("div",{children:"Docto"}),Object(b.jsx)("div",{onClick:function(){O.a.get("/api/admin/logout",{withCredentials:!0}).then((function(e){t({type:"LOG_OUT"})})).catch((function(e){return console.log(e)}))},className:"cursor-pointer",children:"Logout"})]})}function C(){var e=Object(n.useState)({from:"",to:"",report:[]}),t=Object(l.a)(e,2),a=t[0],c=t[1],s=function(e){c(Object(i.a)(Object(i.a)({},a),{},Object(r.a)({},e.target.name,e.target.value)))};return Object(b.jsxs)("div",{className:"w-full h-screen",children:[Object(b.jsx)("div",{className:"w-full p-4 cursor-pointer flex flex-row items-center justify-between block  border-b-0 border  border-gray-200 text-grey-100 font-sm bg-gray-200",children:Object(b.jsx)("div",{children:"Reports"})}),Object(b.jsx)("div",{className:"w-full p-4",children:Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),O.a.post("/api/slot/get_report_date",{from:a.from,to:a.to}).then((function(e){c(Object(i.a)(Object(i.a)({},a),{},{report:e.data}))})).catch((function(e){console.log(e)}))},children:[Object(b.jsxs)("div",{className:"flex flex-row",children:[Object(b.jsxs)("div",{className:"w-full mb-2",children:[Object(b.jsx)("label",{className:"text-darkgray ",style:{marginRight:"13px"},children:"From"}),Object(b.jsx)("input",Object(r.a)({onChange:s,required:!0,className:"p-2 mb-2 ",value:a.op,type:"date",style:{border:"solid gray 1px",paddingLeft:"4px"},name:"from"},"className","w-52"))]}),Object(b.jsxs)("div",{className:"w-full mb-2",children:[Object(b.jsx)("label",{className:"text-darkgray",style:{marginRight:"13px"},children:"To"}),Object(b.jsx)("input",Object(r.a)({onChange:s,required:!0,className:"p-2 mb-2 ",value:a.op,type:"date",style:{border:"solid gray 1px",paddingLeft:"4px"},name:"to"},"className","w-52"))]})]}),Object(b.jsx)("button",{type:"submit",className:"text-white p-1 bg-gray-500 m-auto  w-48 mt-3 mb-2",children:"Get Report"})]})}),0!==a.report.length&&Object(b.jsxs)("table",{id:"alter",style:{width:"100%",backgroundColor:"white",overflowX:"auto"},children:[Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{className:"pb-2",children:"S.No."}),Object(b.jsx)("th",{className:"pb-2",children:"Service Name"}),Object(b.jsx)("th",{className:"pb-2",children:"Revenue"})]}),a.report.map((function(e,t){return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:t+1}),Object(b.jsx)("td",{children:e.ServiceName}),Object(b.jsx)("td",{children:e.revenue})]})}))]})]})}a.n(S).a.config();var _={email:"",password:"",forgot:!1};function I(){var e=Object(n.useContext)(h),t=e.state,a=e.dispatch,c=Object(n.useState)(_),s=Object(l.a)(c,2),o=s[0],d=s[1],u=function(e){d(Object(i.a)(Object(i.a)({},o),{},Object(r.a)({},e.target.name,e.target.value)))};return Object(b.jsxs)("div",{className:"flex flex-col items-center bg-white w-screen h-screen",children:[Object(b.jsx)("h1",{style:{fontSize:"20px",textAlign:"center",width:"60%",marginTop:"10%",marginBottom:"50px"},className:"pb-4",children:"Admin Login"}),Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),o.forgot?O.a.post("/api/admin/forgotPassword",{email:o.email}).then((function(e){y()(e.data.message,{icon:"success"}),d(Object(i.a)(Object(i.a)({},t),{},{forgot:!0}))})).catch((function(e){var t,a;alert(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)})):O.a.post("/api/admin/login",{email:o.email,password:o.password},{withCredentials:!0}).then((function(e){a({type:"LOG_IN"})})).catch((function(e){var t,a;alert(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)}))},style:{width:"300px",display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(b.jsx)("div",{className:"w-full m-2 pl-1 flex flex-row items-center h-auto bg-white rounded-md",style:{border:"solid #757575 1px"},children:Object(b.jsx)("input",{name:"email",placeholder:"Email",required:!0,onChange:u,value:o.email,className:" h-11 w-full bg-transparent",style:{outline:"none"}})}),Object(b.jsx)("div",{}),o.forgot?null:Object(b.jsx)("div",{className:"m-2 flex flex-row pl-1 w-full h-auto bg-white rounded-md",style:{border:"solid #757575 1px"},children:Object(b.jsx)("input",{name:"password",placeholder:"Password",type:"password",required:!0,value:o.password,onChange:u,className:" h-11 w-full bg-transparent",style:{outline:"none"}})}),Object(b.jsx)("div",{}),Object(b.jsx)("button",{type:"submit",className:"w-48 p-2 bg-gray-500 text-white m-2 mt-4",children:o.forgot?"Send Link":"Submit"})]})]})}function P(){var e=Object(n.useContext)(h),t=e.state,a=e.dispatch;return console.log(t),Object(n.useEffect)((function(){console.log("production"),O.a.get("/api/admin/check_login",{withCredentials:!0}).then((function(){a({type:"LOG_IN"})})).catch((function(e){return a({type:"LOG_OUT"})}))}),[]),(null===t||void 0===t?void 0:t.loggedIn)?Object(b.jsxs)(d.a,{children:[Object(b.jsx)(k,{}),Object(b.jsxs)("div",{style:{overflowX:"hidden"},className:"bg-white m-0 p-0 w-full h-full flex flex-row",children:[Object(b.jsx)(x,{}),Object(b.jsxs)(u.c,{children:[Object(b.jsx)(u.a,{exact:!0,path:"/pay",children:Object(b.jsx)(N,{})}),Object(b.jsx)(u.a,{exact:!0,path:"/reports",children:Object(b.jsx)(C,{})})]})]})]}):Object(b.jsx)(I,{})}var L=function(){return Object(b.jsx)(g,{children:Object(b.jsx)(P,{})})},D=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,71)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,o=t.getTTFB;a(e),n(e),c(e),s(e),o(e)}))};o.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(L,{})}),document.getElementById("root")),D()}},[[70,1,2]]]);
//# sourceMappingURL=main.b9c9005f.chunk.js.map