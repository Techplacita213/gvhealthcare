(this.webpackJsonpadmin=this.webpackJsonpadmin||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},70:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(32),s=n.n(o),i=(n(39),n(12)),r=n(2),l=n(13),d=(n(40),n(11)),u=n(3),b=(n(41),n(1)),j={loggedIn:!1},h=Object(a.createContext)(j),p=h.Provider,g=function(e){var t=e.children,n=Object(a.useReducer)((function(e,t){switch(t.type){case"LOG_IN":return Object(r.a)(Object(r.a)({},e),{},{loggedIn:!0});case"LOG_OUT":return Object(r.a)(Object(r.a)({},e),{},{loggedIn:!1});default:return e}}),j),c=Object(l.a)(n,2),o=c[0],s=c[1];return Object(b.jsx)(p,{value:{state:o,dispatch:s},children:t})},f=n(20),m=function(){var e=Object(u.f)();return Object(b.jsx)("div",{style:{boxShadow:"0px 0px 10px rgba(0,0,0,0.2)",zIndex:"2"},className:"w-72 h-screen bg-white",children:Object(b.jsxs)(d.b,{to:"/pay",className:"w-full p-4 cursor-pointer flex flex-row items-center block  border border-gray-200  text-grey-100 font-sm \n             ".concat("/pay"===e.pathname?"bg-gray-200":"text-darkgray","\n            "),children:[Object(b.jsx)(f.a,{style:{marginRight:"20px"}}),Object(b.jsx)("div",{children:"Payments"})]})})},O=n(7),x=n.n(O),v=n.p+"static/media/close.17a94979.svg",w=n(14),y=n.n(w);function S(){var e=Object(u.g)().name,t=Object(a.useState)(Object(i.a)({bookedSlots:[],search:"",by:"",currentPage:1,pages:[],refresh:0,toSort:!1},"by","")),n=Object(l.a)(t,2),c=n[0],o=n[1];Object(a.useEffect)((function(){x.a.post("/api/slot/get_booked_paginate",{currentPage:c.currentPage,name:e}).then((function(e){var t=[];if(e.data.pageCount<5)for(var n=0;n<e.data.pageCount;n++)t.push(n+1);else for(var a=0;a<5;a++)t.push(a+1);o(Object(r.a)(Object(r.a)({},c),{},{bookedSlots:e.data.bookedSlots,pageCount:e.data.pageCount,pages:t}))})).catch((function(e){return console.log(e)}))}),[c.refresh]);return Object(b.jsxs)("div",{className:" w-full",style:{overflowX:"auto"},children:[Object(b.jsxs)("table",{id:"alter",style:{width:"100%",backgroundColor:"white",overflowX:"auto"},children:[Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{className:"bg-white",style:{width:"auto"},children:"OrderId"}),Object(b.jsx)("th",{className:"bg-white",children:"Name"}),Object(b.jsx)("th",{onClick:function(){return t="date",void x.a.post("/api/slot/get_booked_paginate",{currentPage:1,toSort:!0,by:t,name:e}).then((function(e){var n=[];if(e.data.pageCount<5)for(var a=0;a<e.data.pageCount;a++)n.push(a+1);else for(var s=0;s<5;s++)n.push(s+1);o(Object(r.a)(Object(r.a)({},c),{},{bookedSlots:e.data.bookedSlots,pageCount:e.data.pageCount,pages:n,currentPage:1,by:t,toSort:!0,search:""}))})).catch((function(e){return console.log(e)}));var t},className:"cursor-pointer bg-white",children:"Date"}),Object(b.jsx)("th",{className:"bg-white",children:"Slot"}),Object(b.jsx)("th",{className:"bg-white",children:"Service"}),Object(b.jsx)("th",{className:"bg-white",children:"Status"}),Object(b.jsx)("th",{className:"bg-white",children:"Cancel"})]}),c.bookedSlots.map((function(e){var t,n,a,s;return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:e.receipt}),Object(b.jsx)("td",{children:null===(t=e.userDetailes)||void 0===t?void 0:t.name}),Object(b.jsx)("td",{children:e.date}),Object(b.jsx)("td",{children:Object(b.jsxs)("span",{children:[(null===e||void 0===e||null===(n=e.slotDetailes)||void 0===n?void 0:n.startTime)||"not","-",(null===e||void 0===e||null===(a=e.slotDetailes)||void 0===a?void 0:a.endTime)||"exists"]})}),Object(b.jsx)("td",{children:Object(b.jsx)("span",{children:(null===e||void 0===e||null===(s=e.serviceId)||void 0===s?void 0:s.name)||e.serviceName})}),Object(b.jsx)("td",{onDoubleClick:function(){!function(e){"processing"===e.status?x.a.post("/api/slot/change_status",{status:"completed",id:e._id}).then((function(t){var n=c.bookedSlots;n=n.map((function(t){return t._id==e._id&&("processing"===t.status?t.status="completed":"completed"===t.status&&(t.status="processing")),t})),o(Object(r.a)(Object(r.a)({},c),{},{bookedSlots:n}))})).catch((function(e){console.log(e)})):"completed"===e.status&&x.a.post("/api/slot/change_status",{status:"processing",id:e._id}).then((function(t){var n=c.bookedSlots;n=n.map((function(t){return t._id==e._id&&("processing"===t.status?t.status="completed":"completed"===t.status&&(t.status="processing")),t})),o(Object(r.a)(Object(r.a)({},c),{},{bookedSlots:n}))})).catch((function(e){console.log(e)}))}(e)},children:Object(b.jsx)("span",{style:{padding:"5px",color:"white",fontSize:"13px",backgroundColor:"processing"===e.status||"completed"===e.status?"#10B981":"#EF4444"},children:e.status})}),Object(b.jsx)("td",{onClick:function(){var t,n;t=97.82*e.amount/100||97.82*e.serviceId.charge/100,n=e.tid,console.log(typeof t),y()({title:"Are You Sure?",text:"Refund Amount: ".concat(t),icon:"warning",buttons:!0,dangerMode:!0}).then((function(e){e&&x.a.post("/api/pay/refund",{tid:n,amount:parseInt(t)}).then((function(e){y()("Will be refunded!",{icon:"success"}),o(Object(r.a)(Object(r.a)({},c),{},{refresh:c.refresh+1}))})).catch((function(e){return y()(e.response.data.message,{icon:"danger"})}))}))},children:Object(b.jsx)("img",{src:v,style:{width:"7px",height:"auto",margin:"auto"}})})]})}))]}),Object(b.jsx)("div",{style:{width:"min-content",margin:"auto",alignItems:"center",height:"auto",marginTop:"30px"},className:"flex flex-row items-center",children:Object(b.jsx)("div",{style:{margin:"auto",width:"min-content",height:"auto"},className:"flex flex-row",children:c.pages.map((function(t){return Object(b.jsx)("div",{onClick:function(){o(Object(r.a)(Object(r.a)({},c),{},{currentPage:t})),function(t){x.a.post("/api/slot/get_booked_paginate",{currentPage:t,toSort:c.toSort,by:c.by,name:e}).then((function(e){o(Object(r.a)(Object(r.a)({},c),{},{bookedSlots:e.data.bookedSlots,pageCount:e.data.pageCount,currentPage:t}))})).catch((function(e){return console.log(e)}))}(t)},className:"p-1 pl-3 pr-3 cursor-pointer ml-2 mr-2 ".concat(c.currentPage==t?"bg-gray-200 rounded-sm":""),children:t})}))})})]})}var C=n(34);function k(){var e=Object(a.useContext)(h),t=(e.state,e.dispatch);return Object(b.jsxs)("div",{className:"flex flex-row p-5 justify-between bg-gray-300 mb-8",children:[Object(b.jsx)("div",{children:"Docto"}),Object(b.jsx)("div",{onClick:function(){x.a.get("/api/admin/logout",{withCredentials:!0}).then((function(e){t({type:"LOG_OUT"})})).catch((function(e){return console.log(e)}))},className:"cursor-pointer",children:"Logout"})]})}n.n(C).a.config();var N={email:"",password:"",forgot:!1};function _(){var e=Object(a.useContext)(h),t=e.state,n=e.dispatch,c=Object(a.useState)(N),o=Object(l.a)(c,2),s=o[0],d=o[1],u=function(e){d(Object(r.a)(Object(r.a)({},s),{},Object(i.a)({},e.target.name,e.target.value)))};return Object(b.jsxs)("div",{className:"flex flex-col items-center bg-white w-screen h-screen",children:[Object(b.jsx)("h1",{style:{fontSize:"20px",textAlign:"center",width:"60%",marginTop:"10%",marginBottom:"50px"},className:"pb-4",children:"Admin Login"}),Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),s.forgot?x.a.post("/api/admin/forgotPassword",{email:s.email}).then((function(e){y()(e.data.message,{icon:"success"}),d(Object(r.a)(Object(r.a)({},t),{},{forgot:!0}))})).catch((function(e){var t,n;alert(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)})):x.a.post("/api/admin/login",{email:s.email,password:s.password},{withCredentials:!0}).then((function(e){n({type:"LOG_IN"})})).catch((function(e){var t,n;alert(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)}))},style:{width:"300px",display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(b.jsx)("div",{className:"w-full m-2 pl-1 flex flex-row items-center h-auto bg-white rounded-md",style:{border:"solid #757575 1px"},children:Object(b.jsx)("input",{name:"email",placeholder:"Email",required:!0,onChange:u,value:s.email,className:" h-11 w-full bg-transparent",style:{outline:"none"}})}),Object(b.jsx)("div",{}),s.forgot?null:Object(b.jsx)("div",{className:"m-2 flex flex-row pl-1 w-full h-auto bg-white rounded-md",style:{border:"solid #757575 1px"},children:Object(b.jsx)("input",{name:"password",placeholder:"Password",type:"password",required:!0,value:s.password,onChange:u,className:" h-11 w-full bg-transparent",style:{outline:"none"}})}),Object(b.jsx)("div",{}),Object(b.jsx)("button",{type:"submit",className:"w-48 p-2 bg-gray-500 text-white m-2 mt-4",children:s.forgot?"Send Link":"Submit"})]})]})}function I(){var e=Object(a.useContext)(h),t=e.state,n=e.dispatch;return console.log(t),Object(a.useEffect)((function(){console.log("production"),x.a.get("/api/admin/check_login",{withCredentials:!0}).then((function(){n({type:"LOG_IN"})})).catch((function(e){return n({type:"LOG_OUT"})}))}),[]),(null===t||void 0===t?void 0:t.loggedIn)?Object(b.jsxs)(d.a,{children:[Object(b.jsx)(k,{}),Object(b.jsxs)("div",{style:{overflowX:"hidden"},className:"bg-white m-0 p-0 w-full h-full flex flex-row",children:[Object(b.jsx)(m,{}),Object(b.jsx)(u.c,{children:Object(b.jsx)(u.a,{exact:!0,path:"/pay",children:Object(b.jsx)(S,{})})})]})]}):Object(b.jsx)(_,{})}var P=function(){return Object(b.jsx)(g,{children:Object(b.jsx)(I,{})})},L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,71)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),o(e),s(e)}))};s.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(P,{})}),document.getElementById("root")),L()}},[[70,1,2]]]);
//# sourceMappingURL=main.9f0a1d43.chunk.js.map